{% for station in stations %}
<div class="scanner-card">
    <div class="card-edge"></div>
    <div class="card-body">
        <div class="card-header">
            <span class="lcd-freq">{{ "%.1f"|format(station.frequency) }} MHz</span>
            <span class="lcd-pi">PI:{{ station.pi if station.pi else '----' }}</span>
        </div>

        <div class="station-main">
            <div class="station-name-lcd {{ 'dim' if not station.ps }}">
                {{ station.ps if station.ps else "DETECTOR ACTIVE..." }}
            </div>
            <div class="pty-lcd">{{ station.pty | pty_name }}</div>
        </div>

        {% if station.rt %}
        <div class="rt-terminal">
            <div class="msg-prefix">&gt;</div>
            <div class="msg-content">{{ station.rt }}</div>
        </div>
        {% endif %}

        <div class="scanner-footer">
            <div class="flag-indicators">
                <div class="indicator {{ 'active-tmc' if station.tmc }}" title="Traffic Message Channel">TMC</div>
                <div class="indicator {{ 'active-ta' if station.ta }}" title="Traffic Announcement">TA</div>
                <div class="indicator {{ 'active-tp' if station.tp }}" title="Traffic Programme">TP</div>
            </div>
            <div class="hit-stats">
                <span class="hits-label">PKTS:</span>
                <span class="hits-val">{{ station.hit_count }}</span>
            </div>
        </div>
    </div>
</div>
{% endfor %}

{% if not stations %}
<div class="no-signal">
    <div class="lcd-text">SQUELCH ACTIVE</div>
    <div class="lcd-sub">AWAITING SIGNAL LOCK</div>
</div>
{% endif %}

<style>
    .scanner-card {
        background: #1a1a1a;
        border: 2px solid #333;
        border-radius: 4px;
        margin-bottom: 12px;
        display: flex;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5), inset 0 1px 1px rgba(255, 255, 255, 0.05);
        font-family: 'Inter', sans-serif;
    }

    .card-edge {
        width: 6px;
        background: #444;
        border-right: 1px solid #000;
    }

    .scanner-card:hover .card-edge {
        background: #00d2ff;
        box-shadow: 0 0 10px rgba(0, 210, 255, 0.5);
    }

    .card-body {
        flex-grow: 1;
        padding: 12px;
        background: linear-gradient(180deg, #1f1f1f 0%, #151515 100%);
    }

    .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
        border-bottom: 1px solid #333;
        padding-bottom: 4px;
    }

    .lcd-freq {
        font-family: 'JetBrains Mono', monospace;
        color: #00d2ff;
        font-weight: 800;
        letter-spacing: -1px;
    }

    .lcd-pi {
        font-size: 0.7em;
        color: #666;
        font-family: monospace;
    }

    .station-main {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        margin-bottom: 10px;
    }

    .station-name-lcd {
        font-size: 1.5em;
        font-weight: 900;
        color: #fff;
        text-transform: uppercase;
        letter-spacing: 1px;
        text-shadow: 0 0 5px rgba(255, 255, 255, 0.1);
    }

    .station-name-lcd.dim {
        color: #333;
        font-style: italic;
    }

    .pty-lcd {
        font-size: 0.65em;
        background: #000;
        color: #aaa;
        padding: 2px 8px;
        border-radius: 10px;
        border: 1px solid #333;
        font-weight: bold;
    }

    .rt-terminal {
        background: #000;
        border-radius: 3px;
        padding: 6px 10px;
        display: flex;
        gap: 8px;
        margin-bottom: 10px;
        border: 1px solid #003300;
    }

    .msg-prefix {
        color: #00ff41;
        font-family: monospace;
        font-weight: bold;
    }

    .msg-content {
        color: #00ff41;
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.85em;
        text-shadow: 0 0 5px rgba(0, 255, 65, 0.4);
    }

    .scanner-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .flag-indicators {
        display: flex;
        gap: 6px;
    }

    .indicator {
        font-size: 0.6em;
        font-weight: 900;
        color: #222;
        background: #0a0a0a;
        padding: 2px 6px;
        border-radius: 2px;
        border: 1px solid #1a1a1a;
    }

    .active-tmc {
        background: #ff0055;
        color: #fff;
        box-shadow: 0 0 8px rgba(255, 0, 85, 0.5);
        border-color: #ff3377;
    }

    .active-ta {
        background: #ffaa00;
        color: #000;
        box-shadow: 0 0 8px rgba(255, 170, 0, 0.5);
        border-color: #ffcc00;
    }

    .active-tp {
        background: #00d2ff;
        color: #000;
        box-shadow: 0 0 8px rgba(0, 210, 255, 0.5);
        border-color: #33e0ff;
    }

    .hit-stats {
        font-family: monospace;
        font-size: 0.7em;
    }

    .hits-label {
        color: #555;
    }

    .hits-val {
        color: #00ff41;
        font-weight: bold;
    }

    .no-signal {
        padding: 40px;
        text-align: center;
        background: #111;
        border: 2px dashed #222;
        border-radius: 8px;
    }

    .lcd-text {
        font-size: 1.5em;
        font-weight: 900;
        color: #222;
        letter-spacing: 4px;
    }

    .lcd-sub {
        font-size: 0.7em;
        color: #333;
        margin-top: 10px;
    }
</style>